var Observable=function(){"use strict";function a(a){return void 0!==a&&void 0!==a._signals&&void 0!==a._subs}function b(b){if(!a(b))throw new Error("Target object is not observable")}function c(a,b){if("string"!=typeof b)throw new Error("Signal must be a string")}function d(a,b,c){return c._singals?c._signals.push(b):c._signals=[b],a._subs[b]?a._subs[b].push(c):a._subs[b]=[c],c}function e(a,b,c,d){var e=a._subs[c]||[],h=a._signals[c].async?g:f;e.forEach(function(a){h(b,d,a)})}function f(a,b,c){var d=c[a];"function"==typeof d&&d(b)}function g(a,b,c){setTimeout(f.bind(null,a,b,c),0)}function h(a,b){for(var c in b)a[c]=b[c];return a}var i={NEXT:"onNext",ERROR:"onError",COMPLETE:"onComplete"};return i.create=function(a,f){return a=a||{},a._subs={},a._signals=f||{},a.subscribe=function(a,e){return b(this),c(this,a),d(this,a,e||{})},a.unsubscribe=function(a){var c,d;if(b(this),!a||!a._signals)return!1;for(var e in a._signals)if(d=a._signals[e],c=d in this._subs?this._subs[d].indexOf(a):-1,c>=0)return this._subs[d].splice(c,1),!0;return!1},a.unsubscribeAll=function(){this._subs={}},a.addSignal=function(a,d){return b(this),c(this,a),this._signals[a]=h(this._signals[a]||{},d||{}),this._signals[a]},a.removeSignal=function(a){return b(this),c(this,a),delete this._signals[a]},a.signal=function(a,d,f){b(this),c(this,d),this._signals[d]=this._signals[d]||{},e(this,a,d,f||{})},a},i}();